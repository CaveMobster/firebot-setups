{"name":"Queue command","description":"!queue is a command that users can use to enter the queue.\n\n**Sub commands:**\n\n*!queue start* - Clears the file and opens the queue.\n\n*!queue leave*  - Leave the queue, removes username from the list.\n\n*!queue close* - Closes the queue to prevent users from entering.\n\n*!queue open* - Opens the queue without clearing the file.\n\n*!queue draw* - Draws the next person in line from the file.\n\n*!queue clear* - Clears the file.\n\n*!queue [anything]* - Is a fallback command with which the user can enter the queue with a custom message.","version":1,"author":"cavemobster","components":{"commands":[{"active":true,"cooldown":{},"count":40,"createdAt":"2021-02-12T21:52:34+01:00","createdBy":"cavemobster","effects":{"id":"60d75e90-9c86-11eb-9477-0bd5a9cf07d7","list":[{"effectLabel":"Check for queue open and double entry","id":"0dfe97d0-9c8e-11eb-9477-0bd5a9cf07d7","ifs":[{"conditionData":{"conditions":[{"comparisonType":"is","leftSideValue":"$customVariable[queueStarted]","rightSideValue":"0","type":"firebot:custom","value":null}],"mode":"exclusive"},"effectData":{"id":"8d1caa80-9c8d-11eb-9477-0bd5a9cf07d7","list":[{"chatter":"Bot","effectLabel":"Queue is closed message","id":"f7bdb960-9c8d-11eb-9477-0bd5a9cf07d7","message":"The queue is currently closed.","type":"firebot:chat"}]},"label":"Queue is closed"},{"conditionData":{"conditions":[{"comparisonType":"contains","leftSideValue":"$readFile[%FilePath%]","rightSideValue":"$username","type":"firebot:custom","value":null}],"mode":"exclusive"},"effectData":{"id":"9308b590-9c8f-11eb-9477-0bd5a9cf07d7","list":[{"chatter":"Bot","effectLabel":"User already entered message","id":"ca9438e0-9c8f-11eb-9477-0bd5a9cf07d7","message":"$user, you are already in the queue!","type":"firebot:chat"}]},"label":"User already entered"}],"otherwiseEffectData":{"id":"8d1afcd0-9c8d-11eb-9477-0bd5a9cf07d7","list":[{"deleteLineMode":"lines","dontRepeat":true,"effectLabel":"Add user to the queue file","filepath":"%FilePath%","id":"b8bedcd0-9c8d-11eb-9477-0bd5a9cf07d7","replaceLineMode":"lineNumbers","text":"$username","type":"firebot:filewriter","writeMode":"append"},{"chatter":"Bot","effectLabel":"Confirmation message","id":"b8bedcd1-9c8d-11eb-9477-0bd5a9cf07d7","message":"$user joined the queue.","type":"firebot:chat"}]},"type":"firebot:conditional-effects"}]},"fallbackSubcommand":{"active":true,"arg":".+","description":"Enter the queue with a custom message.","effects":{"id":"dad21e50-9c8c-11eb-9477-0bd5a9cf07d7","list":[{"effectLabel":"Check for queue open and double entry","id":"f829d6c0-9c8f-11eb-9477-0bd5a9cf07d7","ifs":[{"conditionData":{"conditions":[{"comparisonType":"is","leftSideValue":"$customVariable[queueStarted]","rightSideValue":"0","type":"firebot:custom","value":null}],"mode":"exclusive"},"effectData":{"id":"8d1caa80-9c8d-11eb-9477-0bd5a9cf07d7","list":[{"chatter":"Bot","id":"f7bdb960-9c8d-11eb-9477-0bd5a9cf07d7","message":"The queue is currently closed.","type":"firebot:chat"}]},"label":"Queue is closed"},{"conditionData":{"conditions":[{"comparisonType":"contains","leftSideValue":"$readFile[%FilePath%]","rightSideValue":"$username","type":"firebot:custom","value":null}],"mode":"exclusive"},"effectData":{"id":"9308b590-9c8f-11eb-9477-0bd5a9cf07d7","list":[{"chatter":"Bot","id":"ca9438e0-9c8f-11eb-9477-0bd5a9cf07d7","message":"$user, you are already in the queue!","type":"firebot:chat"}]},"label":"User already entered"}],"otherwiseEffectData":{"id":"8d1afcd0-9c8d-11eb-9477-0bd5a9cf07d7","list":[{"deleteLineMode":"lines","dontRepeat":true,"filepath":"%FilePath%","id":"b8bedcd0-9c8d-11eb-9477-0bd5a9cf07d7","replaceLineMode":"lineNumbers","text":"$username - $arg[all]","type":"firebot:filewriter","writeMode":"append","effectLabel":"Add username to the file"},{"chatter":"Bot","effectLabel":"Confirmation message","id":"b8bedcd1-9c8d-11eb-9477-0bd5a9cf07d7","message":"$user joined the queue with the following: $arg[all].","type":"firebot:chat"}]},"otherwiseLabel":"User succesfully entered","type":"firebot:conditional-effects"}]},"fallback":true,"id":"fallback-subcommand","regex":true,"restrictionData":{"mode":"all","restrictions":[],"sendFailMessage":true},"type":"Fallback","usage":""},"id":"60d75e92-9c86-11eb-9477-0bd5a9cf07d7","ignoreBot":false,"lastEditAt":"2021-04-15T22:54:09+02:00","lastEditBy":"cavemobster","restrictionData":{"mode":"all","restrictions":[],"sendFailMessage":true},"sendCooldownMessage":true,"simple":false,"sortTags":[],"subCommands":[{"active":true,"arg":"start","description":"Clear the queue file and open the queue.","effects":{"id":"60d785a4-9c86-11eb-9477-0bd5a9cf07d7","list":[{"deleteLineMode":"lines","effectLabel":"Clear the queue file","filepath":"%FilePath%","id":"0af3ac50-9c8f-11eb-9477-0bd5a9cf07d7","replaceLineMode":"lineNumbers","type":"firebot:filewriter","writeMode":"delete-all"},{"chatter":"Bot","effectLabel":"Confirmation message","id":"60d785a2-9c86-11eb-9477-0bd5a9cf07d7","message":"Started a new queue, type !queue or !queue [custom message] to join.","type":"firebot:chat"},{"effectLabel":"Open the queue","id":"60d785a3-9c86-11eb-9477-0bd5a9cf07d7","name":"queueStarted","ttl":0,"type":"firebot:customvariable","variableData":"1"}]},"fallback":false,"id":"60d785a0-9c86-11eb-9477-0bd5a9cf07d7","regex":false,"restrictionData":{"mode":"all","restrictions":[{"id":"60d785a1-9c86-11eb-9477-0bd5a9cf07d7","mode":"roles","roleIds":["mod","broadcaster"],"type":"firebot:permissions"}],"sendFailMessage":true},"type":"Custom"},{"active":true,"arg":"draw","description":"Draw the next user from the queue file.","effects":{"id":"60d785a9-9c86-11eb-9477-0bd5a9cf07d7","list":[{"effectLabel":"Check if queue is open","id":"22797160-9c90-11eb-9477-0bd5a9cf07d7","ifs":[{"conditionData":{"conditions":[{"comparisonType":"is","leftSideValue":"$customVariable[queueStarted]","rightSideValue":"0","type":"firebot:custom","value":null}],"mode":"exclusive"},"effectData":{"id":"227d9010-9c90-11eb-9477-0bd5a9cf07d7","list":[{"chatter":"Bot","effectLabel":"Queue not open message","id":"2d6fd6e0-9c90-11eb-9477-0bd5a9cf07d7","message":"The queue is currently closed.","type":"firebot:chat"}]},"label":"Queue is closed"}],"otherwiseEffectData":{"id":"227c0970-9c90-11eb-9477-0bd5a9cf07d7","list":[{"effectLabel":"Temporary variable for queue entry","id":"490557d0-9c91-11eb-9477-0bd5a9cf07d7","name":"nextInQueue","ttl":0,"type":"firebot:customvariable","variableData":"$readFile[%FilePath%, random]"},{"chatter":"Bot","effectLabel":"Announce next in queue","id":"440760d0-9c90-11eb-9477-0bd5a9cf07d7","message":"Next up in the queue is: $customVariable[nextInQueue]!","type":"firebot:chat"},{"deleteLineMode":"text","effectLabel":"Remove user from queue","filepath":"%FilePath%","id":"440760d1-9c90-11eb-9477-0bd5a9cf07d7","replaceLineMode":"lineNumbers","text":"$customVariable[nextInQueue]","type":"firebot:filewriter","writeMode":"delete"}]},"otherwiseLabel":"Queue is open","type":"firebot:conditional-effects"}]},"fallback":false,"id":"60d785a5-9c86-11eb-9477-0bd5a9cf07d7","regex":false,"restrictionData":{"mode":"all","restrictions":[{"id":"60d785a6-9c86-11eb-9477-0bd5a9cf07d7","mode":"roles","roleIds":["broadcaster","mod"],"type":"firebot:permissions"}],"sendFailMessage":true},"type":"Custom"},{"active":true,"arg":"close","description":"Close the queue.","effects":{"id":"60d785b3-9c86-11eb-9477-0bd5a9cf07d7","list":[{"effectLabel":"Close queue","id":"60d785b1-9c86-11eb-9477-0bd5a9cf07d7","name":"queueStarted","ttl":0,"type":"firebot:customvariable","variableData":"0"},{"chatter":"Bot","effectLabel":"Confirmation message","id":"60d785b2-9c86-11eb-9477-0bd5a9cf07d7","message":"The queue is now closed.","type":"firebot:chat"}]},"fallback":false,"id":"60d785af-9c86-11eb-9477-0bd5a9cf07d7","regex":false,"restrictionData":{"mode":"all","restrictions":[{"id":"60d785b0-9c86-11eb-9477-0bd5a9cf07d7","mode":"roles","roleIds":["mod","broadcaster"],"type":"firebot:permissions"}],"sendFailMessage":true},"type":"Custom"},{"active":true,"arg":"open","description":"Open the queue without clearing the file.","effects":{"id":"60d785be-9c86-11eb-9477-0bd5a9cf07d7","list":[{"effectLabel":"Open queue","id":"60d785bc-9c86-11eb-9477-0bd5a9cf07d7","name":"queueStarted","ttl":0,"type":"firebot:customvariable","variableData":"1"},{"chatter":"Bot","effectLabel":"Confirmation message","id":"60d785bd-9c86-11eb-9477-0bd5a9cf07d7","message":"The queue has been opened.","type":"firebot:chat"}]},"fallback":false,"id":"60d785bb-9c86-11eb-9477-0bd5a9cf07d7","regex":false,"restrictionData":{"mode":"all","restrictions":[{"id":"742c9950-9c87-11eb-9477-0bd5a9cf07d7","mode":"roles","roleIds":["mod","broadcaster"],"type":"firebot:permissions"}],"sendFailMessage":true},"type":"Custom"},{"active":true,"arg":"leave","description":"Leave the queue.","effects":{"id":"60d785c6-9c86-11eb-9477-0bd5a9cf07d7","list":[{"effectLabel":"Check if user is in queue","id":"60d785c0-9c86-11eb-9477-0bd5a9cf07d7","ifs":[{"conditionData":{"conditions":[{"comparisonType":"contains","leftSideValue":"$readFile[%FilePath%]","rightSideValue":"$user","type":"firebot:custom","value":null}],"mode":"exclusive"},"effectData":{"id":"60d785c3-9c86-11eb-9477-0bd5a9cf07d7","list":[{"deleteLineMode":"text","effectLabel":"Remove username from file","filepath":"%FilePath%","id":"60d785c1-9c86-11eb-9477-0bd5a9cf07d7","replaceLineMode":"lineNumbers","text":"$username","type":"firebot:filewriter","writeMode":"delete"},{"chatter":"Bot","effectLabel":"Confirmation message","id":"60d785c2-9c86-11eb-9477-0bd5a9cf07d7","message":"$user removed themselves from the queue.","type":"firebot:chat"}]},"label":"User is in queue"}],"otherwiseEffectData":{"id":"60d785c5-9c86-11eb-9477-0bd5a9cf07d7","list":[{"chatter":"Bot","effectLabel":"User not in queue message","id":"60d785c4-9c86-11eb-9477-0bd5a9cf07d7","message":"$username, you didn't enter the queue and therefore cannot leave the queue.","type":"firebot:chat"}]},"otherwiseLabel":"User not in queue","type":"firebot:conditional-effects"}]},"fallback":false,"id":"60d785bf-9c86-11eb-9477-0bd5a9cf07d7","regex":false,"restrictionData":{"mode":"all","restrictions":[],"sendFailMessage":true},"type":"Custom","usage":"leave "},{"active":true,"arg":"clear","description":"Clear the queue file.","effects":{"id":"44733ed0-9c8c-11eb-9477-0bd5a9cf07d7","list":[{"deleteLineMode":"lines","effectLabel":"Clear the file","filepath":"%FilePath%","id":"47a4f6c0-9c8c-11eb-9477-0bd5a9cf07d7","replaceLineMode":"lineNumbers","type":"firebot:filewriter","writeMode":"delete-all"},{"chatter":"Bot","effectLabel":"Confirmation message","id":"73a0bac0-9c8c-11eb-9477-0bd5a9cf07d7","message":"Queue has been cleared.","type":"firebot:chat"}]},"fallback":false,"id":"bb3dd54d-dfa8-471a-849a-529eb4fac246","regex":false,"restrictionData":{"mode":"all","restrictions":[{"id":"520b7850-9c8c-11eb-9477-0bd5a9cf07d7","mode":"roles","roleIds":["mod","broadcaster"],"type":"firebot:permissions"}],"sendFailMessage":true},"type":"Custom"}],"trigger":"!queue"}],"counters":[],"currencies":[],"effectQueues":[],"events":[],"hotkeys":[],"presetEffectLists":[],"timers":[],"viewerRoles":[]},"requireCurrency":false,"importQuestions":[{"id":"17319f2e-2046-486f-920a-a055477036d6","question":"Enter the path to your queue .txt file (make a new one and save it somewhere you can remember).","answerType":"text","replaceToken":"%FilePath%"}]}